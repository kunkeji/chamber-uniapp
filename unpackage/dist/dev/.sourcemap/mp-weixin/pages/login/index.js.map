{"version":3,"sources":["webpack:///G:/wwwroot/fastadmin插件/商协会文档/-/商协会-高级版/pages/login/index.vue?e78b","webpack:///G:/wwwroot/fastadmin插件/商协会文档/-/商协会-高级版/pages/login/index.vue?7af4","uni-app:///main.js","webpack:///G:/wwwroot/fastadmin插件/商协会文档/-/商协会-高级版/pages/login/index.vue?3e79","webpack:///G:/wwwroot/fastadmin插件/商协会文档/-/商协会-高级版/pages/login/index.vue?9ba6","webpack:///G:/wwwroot/fastadmin插件/商协会文档/-/商协会-高级版/pages/login/index.vue?fa64","webpack:///G:/wwwroot/fastadmin插件/商协会文档/-/商协会-高级版/pages/login/index.vue?d90e","uni-app:///pages/login/index.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","loadEnd","isRegister","phoneNumber","avatarPath","userInfo","avatar","nickname","onLoad","uni","title","onShow","onUnload","clearInterval","computed","themeColor","appletLogo","appletName","loginImg","token","WeChatAppid","methods","goBack","url","delta","getAuthStatus","provider","success","code","icon","console","fail","decryptPhoneNumber","mask","bindChooseAvatar","handleLogin","handleRegister","loginEvent","laterAuthorize"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAA0oC,CAAgB,gnCAAG,EAAC,C;;;;;;;;;;;ACA9pC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;ACNL;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA+lB,CAAgB,ynBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;AC+EnnB;AAEA;AAAA;AAAA,eACA;EACAC;IACA;MACA;MACAC;MACA;;MAEA;MACAC;MACA;MACAC;MAEA;MACAC;MACA;MACAC;QACAC;QACAC;MACA;MACA;IAeA;EACA;EACAC;IAAA;IAEAC;MACAC;IACA;IACA;MACAD;MACA;IACA;EAEA;EACAE,2BAWA;EACAC;IACAC;EACA;EACAC,4BACA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;EACA,GACA;EACAC;IACA;IACAC;MACA;MACA;QACAb;UACAc;QACA;MACA;QACA;UACAd;YACAe;UACA;QACA;MACA;IACA;IACA;IAEA;IACAC;MAAA;MACAhB;QACAiB;QACAC;UACA;YACAC;UACA;YACA;YACA;cACA;gBACA;cACA;gBACA;cACA;YACA;cACAnB;gBACAC;gBACAmB;cACA;YACA;UACA;YACA;YACAC;UACA;QACA;QACAC;UACAtB;YACAoB;YACAnB;UACA;QACA;MACA;IACA;IACA;IACAsB;MAAA;MACA;QACAvB;UACAiB;UACAC;YACA;YACA3B;YACA;cACA;gBACA;kBACAS;oBACAC;oBACAuB;kBACA;kBACA;kBACA;gBACA;cACA;gBACAxB;kBACAC;kBACAmB;gBACA;cACA;YACA;cACAC;YACA;UACA;UACAC;YACAtB;cACAoB;cACAnB;YACA;UACA;QACA;MACA;QACAD;UACAC;UACAmB;QACA;MACA;IACA;IACA;IACAK;MACA;IACA;IACA;IACAC;MAAA;MACA;QACA;QACA;UACA1B;YACAC;YACAmB;UACA;UACA;QACA;QACA;UACApB;YACAC;YACAmB;UACA;UACA;QACA;MACA;MACApB;QACAC;QACAuB;MACA;MACA;QACA;UACA;UACA;QACA;UACAxB;UACAqB;QACA;MACA;QACA;MACA;IACA;IACA;IACAM;MACA3B;QACAC;QACAuB;MACA;MACA;IACA;IACA;IACAI;MAAA;MACA5B;QACAiB;QACAC;UACA;UACA;YACAC;UACA;UACA;YACAL;YACA;UACA;YACAA;YACAvB;YACA;YACA;YACA;UACA;UACA;YACAS;YACA;cACAA;cACAA;cACA;cACA;cACA;YACA;cACAA;gBACAC;gBACAmB;cACA;YACA;UACA;YACAC;UACA;QACA;QACAC;UACAtB;YACAoB;YACAnB;UACA;QACA;MACA;IACA;IACA;IACA4B;MACA7B;QACAC;QACAuB;MACA;MACA;IACA,EAEA;EA4PA;AACA;AAAA,2B","file":"pages/login/index.js","sourcesContent":["import mod from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1732279581410\n      var cssReload = require(\"F:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/login/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=4586967a&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/login/index.vue\"\nexport default component.exports","export * from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=4586967a&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\" :style=\"{'--theme-color': themeColor}\">\r\n\t\t<!-- 标题栏 -->\r\n\t\t<title-bar :showBack=\"true\" title=\"登录\"></title-bar>\r\n\t\t<!-- 内容区 -->\r\n\t\t<view class=\"container-main\" v-if=\"loadEnd\">\r\n\t\t\t<image class=\"main-header\" :src=\"loginImg\" mode=\"aspectFit\"></image>\r\n\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t<view class=\"main-login\">\r\n\t\t\t\t<view class=\"login-title\">小程序需要登录注册才能使用相关功能，申请获取以下权限</view>\r\n\t\t\t\t<view class=\"login-subtitle\">获得你的公开信息(昵称、头像、手机号码等)</view>\r\n\t\t\t\t<!-- 授权登录 -->\r\n\t\t\t\t<view class=\"login-info\" v-if=\"isRegister\">\r\n\t\t\t\t\t<view class=\"info-btn\" @click=\"handleLogin\">授权登录</view>\r\n\t\t\t\t\t<view class=\"info-btn cancel\" @click=\"goBack\">暂不登录</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 授权手机号 -->\r\n\t\t\t\t<view class=\"login-info\" v-else-if=\"!phoneNumber\">\r\n\t\t\t\t\t<button class=\"info-btn\" open-type=\"getPhoneNumber\" @getphonenumber=\"decryptPhoneNumber\">授权手机号</button>\r\n\t\t\t\t\t<view class=\"info-btn cancel\" @click=\"goBack\">暂不授权</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 授权头像昵称 -->\r\n\t\t\t\t<form class=\"login-info\" @submit=\"handleLogin\" v-else>\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<view class=\"item-title\">头像</view>\r\n\t\t\t\t\t\t<button class=\"item-avatar\" open-type=\"chooseAvatar\" @chooseavatar=\"bindChooseAvatar\">\r\n\t\t\t\t\t\t\t<image class=\"image\" :src=\"avatarPath || '/static/login.png'\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<view class=\"item-title\">昵称</view>\r\n\t\t\t\t\t\t<input class=\"item-nickname\" type=\"nickname\" name=\"nickname\" :value=\"userInfo.nickname\" placeholder=\"请输入昵称\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<button class=\"info-btn\" style=\"margin-top: 48rpx;\" form-type=\"submit\">授权登录</button>\r\n\t\t\t\t\t<button class=\"info-btn cancel\" @click=\"handleRegister\">稍后授权</button>\r\n\t\t\t\t</form>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<!-- #ifndef MP-WEIXIN -->\r\n\t\t\t<!-- 手机号验证码登录 -->\r\n\t\t\t<view class=\"main-form\" v-if=\"!isShowInfo\">\r\n\t\t\t\t<view class=\"form-input\">\r\n\t\t\t\t\t<input class=\"input\" v-model=\"mobile\" maxlength=\"11\" type=\"number\" placeholder=\"请输入您的手机号\" placeholder-class=\"placeholder\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"form-input flex align-items-center\">\r\n\t\t\t\t\t<input class=\"input flex-item\" v-model=\"captcha\" type=\"text\" placeholder=\"请输入验证码\" placeholder-class=\"placeholder\" />\r\n\t\t\t\t\t<view class=\"countdown\" v-if=\"countdown && countdown > 0\">{{countdown}}秒</view>\r\n\t\t\t\t\t<view class=\"btn\" @click=\"getCaptcha()\" v-else>发送验证码</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"form-btn\" @click=\"onLogin\">登录</view>\r\n\t\t\t\t<view class=\"form-read flex align-items-center\" @click=\"isRead = !isRead\">\r\n\t\t\t\t\t<view class=\"radio\" :class=\"{active: isRead}\">\r\n\t\t\t\t\t\t<image src=\"/static/tick.png\" mode=\"aspectFill\" v-if=\"isRead\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"label flex-item\">我已阅读并同意 <text @click.stop=\"toAgreement(1)\">《用户协议》</text>和<text @click.stop=\"toAgreement(2)\">《隐私政策》</text></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 授权头像昵称 -->\r\n\t\t\t<view class=\"main-login\" v-else>\r\n\t\t\t\t<view class=\"login-info\">\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<view class=\"item-title\">头像</view>\r\n\t\t\t\t\t\t<view class=\"item-avatar\" @click=\"chooseAvatar\">\r\n\t\t\t\t\t\t\t<image class=\"image\" :src=\"avatarPath || '/static/login.png'\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<view class=\"item-title\">昵称</view>\r\n\t\t\t\t\t\t<input class=\"item-nickname\" v-model=\"userInfo.nickname\" placeholder=\"请输入昵称\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<button class=\"info-btn\" style=\"margin-top: 48rpx;\" @click=\"handleUpdateUser\">授权登录</button>\r\n\t\t\t\t\t<button class=\"info-btn cancel\" @click=\"goBack\">稍后授权</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport {\r\n\t\tmapState\r\n\t} from \"vuex\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 加载完成\r\n\t\t\t\tloadEnd: false,\r\n\t\t\t\t// 微信参数\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t// 是否已经注册\r\n\t\t\t\tisRegister: false,\r\n\t\t\t\t// 已授权手机号\r\n\t\t\t\tphoneNumber: null,\r\n\t\t\t\t// #endif\r\n\t\t\t\t// 已选择头像\r\n\t\t\t\tavatarPath: \"\",\r\n\t\t\t\t// 用户信息\r\n\t\t\t\tuserInfo: {\r\n\t\t\t\t\tavatar: \"\",\r\n\t\t\t\t\tnickname: \"\",\r\n\t\t\t\t},\r\n\t\t\t\t// 公众号H5参数\r\n\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\t// 是否已读\r\n\t\t\t\tisRead: false,\r\n\t\t\t\t// 手机号\r\n\t\t\t\tmobile: \"\",\r\n\t\t\t\t// 验证码\r\n\t\t\t\tcaptcha: \"\",\r\n\t\t\t\t// 验证码倒计时\r\n\t\t\t\tcountdown: 0,\r\n\t\t\t\t// 定时器\r\n\t\t\t\tinterval: null,\r\n\t\t\t\t// 是否显示设置头像昵称\r\n\t\t\t\tisShowInfo: false,\r\n\t\t\t\t// #endif\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: \"加载中\"\r\n\t\t\t})\r\n\t\t\tthis.getAuthStatus(() => {\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t\tthis.loadEnd = true\r\n\t\t\t})\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\tthis.loadEnd = false\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: \"加载中\"\r\n\t\t\t})\r\n\t\t\tthis.getAuthCode(() => {\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t\tthis.loadEnd = true\r\n\t\t\t})\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tclearInterval(this.interval)\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState({\r\n\t\t\t\tthemeColor: state => state.app.themeColor,\r\n\t\t\t\tappletLogo: state => state.app.appletLogo,\r\n\t\t\t\tappletName: state => state.app.appletName,\r\n\t\t\t\tloginImg: state => state.app.loginImg,\r\n\t\t\t\ttoken: state => state.user.token,\r\n\t\t\t\tWeChatAppid: state => state.app.WeChatAppid,\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 返回上一页\r\n\t\t\tgoBack() {\r\n\t\t\t\tlet pages = getCurrentPages()\r\n\t\t\t\tif (pages.length == 1) {\r\n\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\turl: \"/pages/mine/index\"\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (pages[pages - 1] == 'pages/login/index') {\r\n\t\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\t\tdelta: 2\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else uni.navigateBack()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 微信登录\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t// 获取账号是否已注册\r\n\t\t\tgetAuthStatus(fn) {\r\n\t\t\t\tuni.login({\r\n\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\tsuccess: loginRes => {\r\n\t\t\t\t\t\tthis.$util.request(\"login.isAuth\", {\r\n\t\t\t\t\t\t\tcode: loginRes.code\r\n\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\tif (fn) fn()\r\n\t\t\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\t\t\tif (res.data.auth_status == 1) {\r\n\t\t\t\t\t\t\t\t\tthis.isRegister = true\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.isRegister = false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(error => {\r\n\t\t\t\t\t\t\tif (fn) fn()\r\n\t\t\t\t\t\t\tconsole.error('获取账号是否已注册 ', error)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\t\ttitle: \"授权失败，请重试\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取用户手机号码\r\n\t\t\tdecryptPhoneNumber(e) {\r\n\t\t\t\tif (e.detail.errMsg == \"getPhoneNumber:ok\") {\r\n\t\t\t\t\tuni.login({\r\n\t\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\t\tsuccess: loginRes => {\r\n\t\t\t\t\t\t\tlet data = e.detail\r\n\t\t\t\t\t\t\tdata.code = loginRes.code\r\n\t\t\t\t\t\t\tthis.$util.request(\"login.getPhone\", data).then(res => {\r\n\t\t\t\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\t\t\t\tif (res.data.auth_status == 1) {\r\n\t\t\t\t\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: '授权中',\r\n\t\t\t\t\t\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\tthis.isRegister = true\r\n\t\t\t\t\t\t\t\t\t\tthis.loginEvent(res.data.phoneNumber)\r\n\t\t\t\t\t\t\t\t\t} else this.phoneNumber = res.data.phoneNumber\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).catch(error => {\r\n\t\t\t\t\t\t\t\tconsole.error('获取用户手机号码 ', error)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\t\t\ttitle: \"授权失败，请重试\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '获取失败，请重新获取',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 选择头像\r\n\t\t\tbindChooseAvatar(e) {\r\n\t\t\t\tthis.avatarPath = e.detail.avatarUrl\r\n\t\t\t},\r\n\t\t\t// 提交登录\r\n\t\t\thandleLogin(e) {\r\n\t\t\t\tif (!this.isRegister) {\r\n\t\t\t\t\tthis.userInfo.nickname = e.detail.value.nickname\r\n\t\t\t\t\tif (!this.avatarPath) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"请设置头像后登录\",\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!this.userInfo.nickname) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"请设置昵称后登录\",\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '授权中',\r\n\t\t\t\t\tmask: true,\r\n\t\t\t\t})\r\n\t\t\t\tif (this.avatarPath) {\r\n\t\t\t\t\tthis.$util.uploadFile(this.avatarPath).then(result => {\r\n\t\t\t\t\t\tthis.userInfo.avatar = result.data.url\r\n\t\t\t\t\t\tthis.loginEvent()\r\n\t\t\t\t\t}).catch(error => {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tconsole.error('上传图片 ', error)\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.loginEvent()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 提交注册\r\n\t\t\thandleRegister() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中',\r\n\t\t\t\t\tmask: true,\r\n\t\t\t\t})\r\n\t\t\t\tthis.loginEvent()\r\n\t\t\t},\r\n\t\t\t// 提交事件\r\n\t\t\tloginEvent(mobile) {\r\n\t\t\t\tuni.login({\r\n\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\tsuccess: loginRes => {\r\n\t\t\t\t\t\tlet url = \"\"\r\n\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\tcode: loginRes.code\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.isRegister) {\r\n\t\t\t\t\t\t\turl = \"login.login\"\r\n\t\t\t\t\t\t\tif (mobile) data.mobile = mobile\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\turl = \"login.register\"\r\n\t\t\t\t\t\t\tdata.mobile = this.phoneNumber\r\n\t\t\t\t\t\t\tif (uni.getStorageSync(\"parentWechatId\")) data.parent_wechat_id = uni.getStorageSync(\"parentWechatId\")\r\n\t\t\t\t\t\t\tif (this.userInfo.nickname) data.nickname = this.userInfo.nickname\r\n\t\t\t\t\t\t\tif (this.userInfo.avatar) data.avatar = this.userInfo.avatar\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.$util.request(url, data).then(res => {\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\t\t\tuni.setStorageSync('token', res.data.token);\r\n\t\t\t\t\t\t\t\tuni.setStorageSync(\"userInfo\", res.data)\r\n\t\t\t\t\t\t\t\tthis.$store.commit('user/setToken', res.data.token)\r\n\t\t\t\t\t\t\t\tthis.$store.commit('user/setUserInfo', res.data)\r\n\t\t\t\t\t\t\t\tthis.goBack()\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(error => {\r\n\t\t\t\t\t\t\tconsole.error('登录/注册 ', error)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\t\ttitle: \"授权失败，请重试\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 稍后授权\r\n\t\t\tlaterAuthorize() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '授权中',\r\n\t\t\t\t\tmask: true,\r\n\t\t\t\t})\r\n\t\t\t\tthis.loginEvent()\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\t// 公众号H5登录\r\n\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t// 获取微信授权code\r\n\t\t\tgetAuthCode(fn) {\r\n\t\t\t\tlet authCode = this.getUrlCode('code')\r\n\t\t\t\tif (authCode) {\r\n\t\t\t\t\tconst now = new Date().getTime();\r\n\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\tvalue: authCode,\r\n\t\t\t\t\t\texpiry: parseInt(now) + 240000,\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsessionStorage.setItem('authCode', JSON.stringify(item));\r\n\t\t\t\t\tif (document.referrer.indexOf(\"open.weixin.qq.com\") == -1) {\r\n\t\t\t\t\t\thistory.back()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\thistory.go(-2)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.getSessionValue('authCode')) {\r\n\t\t\t\t\t\tif (fn) fn()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar local = window.location.href;\r\n\t\t\t\t\t\tvar appid = this.WeChatAppid\r\n\t\t\t\t\t\tlocation.href = \"https://open.weixin.qq.com/connect/oauth2/authorize?appid=\" + appid + \"&redirect_uri=\" + encodeURIComponent(local) + \"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 获取临时存储\r\n\t\t\tgetSessionValue(key) {\r\n\t\t\t\tconst itemStr = sessionStorage.getItem(key);\r\n\t\t\t\tif (!itemStr) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tconst item = JSON.parse(itemStr);\r\n\t\t\t\tconst now = new Date();\r\n\t\t\t\tif (now.getTime() > item.expiry) {\r\n\t\t\t\t\tsessionStorage.removeItem(key);\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\treturn item.value;\r\n\t\t\t},\r\n\t\t\t// 截取url中的code方法\r\n\t\t\tgetUrlCode(name) {\r\n\t\t\t\tvar reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)');\r\n\t\t\t\tlet url = window.location.href.split('#')[0];\r\n\t\t\t\tlet search = url.split('?')[1];\r\n\t\t\t\tif (search) {\r\n\t\t\t\t\tvar r = search.substr(0).match(reg);\r\n\t\t\t\t\tif (r !== null) {\r\n\t\t\t\t\t\treturn unescape(r[2]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t} else return null;\r\n\t\t\t},\r\n\t\t\t// 跳转用户协议和隐私政策\r\n\t\t\ttoAgreement(type) {\r\n\t\t\t\tthis.$util.toPage({\r\n\t\t\t\t\tmode: 1,\r\n\t\t\t\t\tpath: \"/pages/mine/settings/agreement?type=\" + type\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取验证码\r\n\t\t\tgetCaptcha() {\r\n\t\t\t\tif (!this.mobile) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\ttitle: \"请输入手机号\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.$util.validation(\"phone\", this.mobile)) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\ttitle: \"请输入正确的手机号\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.$util.request(\"login.captcha\", {\r\n\t\t\t\t\tmobile: this.mobile,\r\n\t\t\t\t\tevent: \"mobilelogin\",\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\tclearInterval(this.interval)\r\n\t\t\t\t\t\tthis.countdown = 60\r\n\t\t\t\t\t\tthis.interval = setInterval(() => {\r\n\t\t\t\t\t\t\tif (this.countdown <= 1) {\r\n\t\t\t\t\t\t\t\tclearInterval(this.interval)\r\n\t\t\t\t\t\t\t\tthis.countdown = 0\r\n\t\t\t\t\t\t\t} else this.countdown--\r\n\t\t\t\t\t\t}, 1000)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t\tconsole.error('发送验证码', error)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 登录\r\n\t\t\tonLogin() {\r\n\t\t\t\tif (!this.mobile) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\ttitle: \"请输入手机号\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.$util.validation(\"phone\", this.mobile)) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\ttitle: \"请输入正确的手机号\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.captcha) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\ttitle: \"请输入手机验证码\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: \"登录中\",\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tcode: this.getSessionValue('authCode'),\r\n\t\t\t\t\tmobile: this.mobile,\r\n\t\t\t\t\tcaptcha: this.captcha,\r\n\t\t\t\t}\r\n\t\t\t\tif (uni.getStorageSync(\"parentWechatId\")) data.parent_wechat_id = uni.getStorageSync(\"parentWechatId\")\r\n\t\t\t\tthis.$util.request(\"login.officialLogin\", data).then(res => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\tsessionStorage.removeItem(\"authCode\")\r\n\t\t\t\t\t\tuni.setStorageSync('token', res.data.token);\r\n\t\t\t\t\t\tuni.setStorageSync(\"userInfo\", res.data)\r\n\t\t\t\t\t\tthis.$store.commit('user/setToken', res.data.token)\r\n\t\t\t\t\t\tthis.$store.commit('user/setUserInfo', res.data)\r\n\t\t\t\t\t\tif (res.data.register_state == 1) {\r\n\t\t\t\t\t\t\tthis.isShowInfo = true\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.goBack()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (res.msg.indexOf(\"40163\") > -1) {\r\n\t\t\t\t\t\t\tsessionStorage.removeItem(\"authCode\")\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: \"提示\",\r\n\t\t\t\t\t\t\t\tcontent: \"公众号授权状态已过期，请重试\",\r\n\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\tconfirmColor: this.themeColor,\r\n\t\t\t\t\t\t\t\tconfirmText: \"重新授权\",\r\n\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\tthis.getAuthCode()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t\tconsole.error('登录/注册 ', error)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 选择头像\r\n\t\t\tchooseAvatar() {\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tuni.chooseMedia({\r\n\t\t\t\t\tcount: 9 - this.certificate.length,\r\n\t\t\t\t\tmediaType: ['image'],\r\n\t\t\t\t\tsourceType: ['album', 'camera'],\r\n\t\t\t\t\tsizeType: ['compressed'],\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.avatarPath = res.tempFiles[0].tempFilePath\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tsourceType: ['album'],\r\n\t\t\t\t\tsizeType: ['compressed'],\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.avatarPath = res.tempFilePaths[0]\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\t// 更新用户头像昵称\r\n\t\t\thandleUpdateUser() {\r\n\t\t\t\tif (!this.avatarPath) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"请设置头像后登录\",\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.userInfo.nickname) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"请设置昵称后登录\",\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.uploadAvatar((path) => {\r\n\t\t\t\t\tthis.userInfo.avatar = path\r\n\t\t\t\t\tthis.$util.request(\"mine.updateUser\", this.userInfo).then(res => {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\t\tvar userInfo = uni.getStorageSync(\"userInfo\")\r\n\t\t\t\t\t\t\tuserInfo.avatar = res.data.avatar\r\n\t\t\t\t\t\t\tuserInfo.nickname = res.data.nickname\r\n\t\t\t\t\t\t\tuni.setStorageSync(\"userInfo\", userInfo)\r\n\t\t\t\t\t\t\tthis.$store.commit('user/setUserInfo', userInfo)\r\n\t\t\t\t\t\t\tthis.goBack()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(error => {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tconsole.error('更新用户信息 ' + error)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 上传头像\r\n\t\t\tuploadAvatar(fn) {\r\n\t\t\t\tthis.$util.uploadFile(this.avatarPath).then(res => {\r\n\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\tfn(res.data.url)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t\tconsole.error('上传图片 ', error)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t}\r\n\t}\r\n</script>\r\n<style lang=\"scss\">\r\n\tpage {\r\n\t\tbackground: #fff;\r\n\t}\r\n\r\n\t.container {\r\n\t\t.container-main {\r\n\t\t\tpadding: 96rpx 60rpx 0;\r\n\r\n\t\t\t.main-header {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 500rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.main-login {\r\n\t\t\t\tmargin-top: 76rpx;\r\n\r\n\t\t\t\t.login-title {\r\n\t\t\t\t\tcolor: #585858;\r\n\t\t\t\t\tfont-size: 34rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.login-subtitle {\r\n\t\t\t\t\tcolor: #888;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tmargin-top: 40rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.login-info {\r\n\t\t\t\t\tmargin-top: 48rpx;\r\n\r\n\t\t\t\t\t.info-item {\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\tbackground: #ffffff;\r\n\t\t\t\t\t\tborder-bottom: 1rpx solid #F6F7FB;\r\n\r\n\t\t\t\t\t\t.item-title {\r\n\t\t\t\t\t\t\tmargin-right: 40rpx;\r\n\t\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\t\tline-height: 40rpx;\r\n\t\t\t\t\t\t\tcolor: #000000;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.item-avatar {\r\n\t\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\t\tpadding: 32rpx 0;\r\n\t\t\t\t\t\t\theight: 80rpx;\r\n\t\t\t\t\t\t\tbackground: transparent;\r\n\t\t\t\t\t\t\tbox-sizing: content-box;\r\n\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\tjustify-content: flex-start;\r\n\r\n\t\t\t\t\t\t\t&::after {\r\n\t\t\t\t\t\t\t\tborder: none;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t.image {\r\n\t\t\t\t\t\t\t\twidth: 80rpx;\r\n\t\t\t\t\t\t\t\theight: 80rpx;\r\n\t\t\t\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.item-nickname {\r\n\t\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\t\tline-height: 40rpx;\r\n\t\t\t\t\t\t\tpadding: 32rpx 0;\r\n\t\t\t\t\t\t\tbox-sizing: content-box;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.info-btn {\r\n\t\t\t\t\t\theight: 88rpx;\r\n\t\t\t\t\t\tline-height: 88rpx;\r\n\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\t\tbackground: var(--theme-color);\r\n\t\t\t\t\t\tcolor: #ffffff;\r\n\r\n\t\t\t\t\t\t&.cancel {\r\n\t\t\t\t\t\t\tbackground: #eee;\r\n\t\t\t\t\t\t\tcolor: #999;\r\n\t\t\t\t\t\t\tmargin-top: 24rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.main-form {\r\n\t\t\t\tmargin-top: 96rpx;\r\n\r\n\t\t\t\t.form-input {\r\n\t\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\t\tborder: 1rpx solid #F0F0F0;\r\n\t\t\t\t\tbackground: #FFF;\r\n\t\t\t\t\tmargin-top: 32rpx;\r\n\r\n\t\t\t\t\t&:first-child {\r\n\t\t\t\t\t\tmargin-top: 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.input {\r\n\t\t\t\t\t\tcolor: #5A5B6E;\r\n\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\tline-height: 40rpx;\r\n\t\t\t\t\t\tpadding: 36rpx 32rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.placeholder {\r\n\t\t\t\t\t\tcolor: #ACADB7;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.btn {\r\n\t\t\t\t\t\tpadding: 0 24rpx;\r\n\t\t\t\t\t\tcolor: var(--theme-color);\r\n\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\tline-height: 40rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.countdown {\r\n\t\t\t\t\t\tpadding: 0 24rpx;\r\n\t\t\t\t\t\tcolor: #666;\r\n\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\tline-height: 40rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.form-btn {\r\n\t\t\t\t\tcolor: #FFF;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tline-height: 40rpx;\r\n\t\t\t\t\tpadding: 36rpx;\r\n\t\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\t\tbackground: var(--theme-color);\r\n\t\t\t\t\tmargin-top: 48rpx;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.form-read {\r\n\t\t\t\t\tmargin-top: 52rpx;\r\n\r\n\t\t\t\t\t.radio {\r\n\t\t\t\t\t\twidth: 32rpx;\r\n\t\t\t\t\t\theight: 32rpx;\r\n\t\t\t\t\t\tbackground: #D6DBDE;\r\n\t\t\t\t\t\tborder-radius: 50%;\r\n\r\n\t\t\t\t\t\t&.active {\r\n\t\t\t\t\t\t\tbackground: var(--theme-color);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.label {\r\n\t\t\t\t\t\tmargin-left: 20rpx;\r\n\t\t\t\t\t\tcolor: #5A5B6E;\r\n\t\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\t\tline-height: 34rpx;\r\n\r\n\t\t\t\t\t\ttext {\r\n\t\t\t\t\t\t\tcolor: var(--theme-color);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>"],"sourceRoot":""}