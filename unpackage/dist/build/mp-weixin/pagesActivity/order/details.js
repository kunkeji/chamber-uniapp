(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesActivity/order/details"],{"0ac7":function(t,n,e){"use strict";(function(t,n){var o=e("47a9");e("13b0");o(e("3240"));var i=o(e("4843"));t.__webpack_require_UNI_MP_PLUGIN__=e,n(i.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},2296:function(t,n,e){"use strict";var o=e("9e14"),i=e.n(o);i.a},4843:function(t,n,e){"use strict";e.r(n);var o=e("dafe"),i=e("c0b3");for(var c in i)["default"].indexOf(c)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(c);e("2296");var a=e("828b"),r=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);n["default"]=r.exports},"9e14":function(t,n,e){},c0b3:function(t,n,e){"use strict";e.r(n);var o=e("ccf1"),i=e.n(o);for(var c in o)["default"].indexOf(c)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(c);n["default"]=i.a},ccf1:function(t,n,e){"use strict";(function(t){var o=e("47a9");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("7ca3")),c=o(e("db5e")),a=e("8f59");function r(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,o)}return e}var s={components:{carousel:function(){e.e("pages/component/carousel/carousel").then(function(){return resolve(e("0ffb"))}.bind(null,e)).catch(e.oe)},activityPoster:function(){Promise.all([e.e("common/vendor"),e.e("pages/component/activity/poster")]).then(function(){return resolve(e("2130"))}.bind(null,e)).catch(e.oe)}},data:function(){return{loadEnd:!1,pageShow:!1,activityId:null,orderId:null,activityInfo:{},activityInterval:null,countdown:{day:0,hours:0,minutes:0,seconds:0}}},computed:function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?r(Object(e),!0).forEach((function(n){(0,i.default)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}({},(0,a.mapState)({themeColor:function(t){return t.app.themeColor},iconTime:function(t){return c.default.svgToUrl("time",t.app.themeColor)},iconLocation:function(t){return c.default.svgToUrl("location",t.app.themeColor)},iconNavigation:function(t){return c.default.svgToUrl("navigation",t.app.themeColor)}})),onLoad:function(n){var e=this;this.activityId=n.activity_id,this.orderId=n.order_id,t.showLoading({title:"加载中"}),this.getActivity((function(){e.loadEnd=!0,t.hideLoading()}))},onUnload:function(){clearInterval(this.activityInterval)},methods:{pageChange:function(t){this.pageShow=t},getActivity:function(n){var e=this;this.$util.request("activity.orderDetails",{id:this.activityId,order_id:this.orderId}).then((function(o){n&&n(),1==o.code?(e.activityInfo=o.data,e.activityInfo.time_frame=e.getTimeFrame(o.data.start_time,o.data.end_time),e.activityInfo.images?e.activityInfo.image_list=e.activityInfo.images.split(","):e.activityInfo.image_list=[],e.getCountdown()):t.showToast({title:o.msg,icon:"none"})})).catch((function(t){console.error("获取活动详情 ",t)}))},getCountdown:function(){var t=this;this.activityInterval=setInterval((function(){var n=(new Date).getTime();t.countdown=t.$util.getTimeDifference(n,1e3*t.activityInfo.end_time),0==t.countdown.day&&0==t.countdown.hours&&0==t.countdown.minutes&&0==t.countdown.seconds&&clearInterval(t.activityInterval)}),1e3)},getTimeFrame:function(t,n){var e=this.$util.formatDate(t,"object"),o=this.$util.formatDate(n,"object"),i="".concat(e.year,"-").concat(e.month,"-").concat(e.day," ").concat(e.hours,":").concat(e.minutes),c="".concat(o.year,"-").concat(o.month,"-").concat(o.day," ").concat(o.hours,":").concat(o.minutes);return i+"—"+c},toNavigation:function(){this.$util.toPage({mode:7,address:{address:this.activityInfo.address,latitude:this.activityInfo.latitude,longitude:this.activityInfo.longitude}})},onContact:function(){this.$util.toPage({mode:6,phone:this.activityInfo.mobile})},toPayment:function(){this.$util.toPage({mode:1,path:"/pagesActivity/index/order?id="+this.activityId})},toCancel:function(n){var e=this;t.showModal({content:"确认取消参加此活动？取消后无法再次报名此活动",confirmColor:"#FF626E",confirmText:"确认取消",cancelColor:"#999999",cancelText:"我再想想",success:function(o){o.confirm&&e.$util.request("activity.applyDel",{id:n}).then((function(n){1==n.code?(t.showToast({title:"已取消参加",icon:"none",duration:1e3}),setTimeout((function(){return t.navigateBack()}),1e3)):t.showToast({title:n.msg,icon:"none"})})).catch((function(t){console.error("取消参加 ",t)}))}})},handleCancel:function(n){var e=this;t.showModal({content:"确认取消参加此活动？取消后无法再次报名此活动",confirmColor:"#FF626E",confirmText:"确认取消",cancelColor:"#999999",cancelText:"我再想想",success:function(o){o.confirm&&e.$util.request("activity.applyCancel",{id:n}).then((function(n){1==n.code?(t.showToast({title:"已取消参加",icon:"none",duration:1e3}),setTimeout((function(){return t.navigateBack()}),1e3)):t.showToast({title:n.msg,icon:"none"})})).catch((function(t){console.error("取消参加 ",t)}))}})},handleRefund:function(n){var e=this;t.showModal({content:"确认申请退款此活动？退款后无法再次报名该活动",confirmColor:"#FF626E",confirmText:"确认退款",cancelColor:"#999999",cancelText:"取消退款",success:function(o){o.confirm&&e.$util.request("activity.applyRefund",{activity_id:e.activityId,apply_id:n}).then((function(n){1==n.code?t.redirectTo({url:"/pagesActivity/order/success"}):t.showToast({title:n.msg,icon:"none"})})).catch((function(t){console.error("申请退款 ",t)}))}})},showWebsite:function(){var n=this;this.activityInfo.url?t.showModal({content:this.activityInfo.url,confirmColor:this.themeColor,confirmText:"复制链接",cancelColor:"#999999",cancelText:"关闭页面",success:function(e){e.confirm&&t.setClipboardData({data:n.activityInfo.url,success:function(){t.showToast({icon:"success",title:"复制成功"})}})}}):t.showToast({icon:"none",title:"暂无线上地址，请稍后再试"})},showCertificate:function(){t.showToast({icon:"none",title:"暂无参会证书，请稍后再试"})}}};n.default=s}).call(this,e("df3c")["default"])},dafe:function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return c})),e.d(n,"a",(function(){return o}));var o={mpHtml:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/mp-html/components/mp-html/mp-html")]).then(e.bind(null,"6ac6"))}},i=function(){var t=this,n=t.$createElement,e=(t._self._c,t.loadEnd&&1==t.activityInfo.activity_state&&1!=t.activityInfo.pay_state&&2==t.activityInfo.pay_state?parseFloat(t.activityInfo.fees):null);t._isMounted||(t.e0=function(n){return t.$refs.activityPoster.getPoster(t.activityId)},t.e1=function(n){return t.$refs.activityPoster.getPoster(t.activityId)}),t.$mp.data=Object.assign({},{$root:{m0:e}})},c=[]}},[["0ac7","common/runtime","common/vendor"]]]);