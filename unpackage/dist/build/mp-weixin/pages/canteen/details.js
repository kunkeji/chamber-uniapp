(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/canteen/details"],{"376b":function(t,n,e){"use strict";e.r(n);var r=e("b021"),i=e("d785");for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(o);e("f841");var a=e("828b"),c=Object(a["a"])(i["default"],r["b"],r["c"],!1,null,"465746c5",null,!1,r["a"],void 0);n["default"]=c.exports},"39e4":function(t,n,e){"use strict";(function(t){var r=e("47a9");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("7ca3"));function o(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function a(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?o(Object(e),!0).forEach((function(n){(0,i.default)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var c={components:{QuantityControl:function(){e.e("components/QuantityControl").then(function(){return resolve(e("f89f"))}.bind(null,e)).catch(e.oe)}},data:function(){return{shopid:null,navigationBarTitle:"店铺名称",store:{},products:[],cart:[],isCartVisible:!1}},onLoad:function(t){this.shopid=t.id,this.getGoodsList(t.id)},methods:{shopImage:function(t){return getApp().globalData.adminPath+t},getGoodsList:function(t){var n=this;n.$util.request("main.Shop.getGoodsList",{id:t}).then((function(t){if(1==t.code){n.store=t.data;for(var e=0;e<t.data.goods.length;e++)t.data.goods[e].goods_image=n.shopImage(t.data.goods[e].goods_image);n.products=t.data.goods}}))},updateQuantity:function(t,n){var e=this.cart.find((function(n){return n.id===t.id}));e?(e.quantity=n,e.quantity<=0&&this.removeFromCart(this.cart.indexOf(e))):n>0&&this.cart.push(a(a({},t),{},{quantity:1}))},removeFromCart:function(t){this.cart.splice(t,1)},showCart:function(){this.isCartVisible=!0},closeCart:function(t){this.isCartVisible=!1},clearCart:function(){this.cart=[],this.isCartVisible=!1},toFixed:function(t){return(Math.round(100*t)/100).toFixed(2)},placeOrder:function(){0!==this.cart.length?t.navigateTo({url:"/pagesDemand/canteen/userorder?shopid=".concat(this.shopid,"&cart=").concat(encodeURIComponent(JSON.stringify(this.cart)))}):t.showToast({icon:"none",title:"请先添加商品到购物车",duration:2e3})},getProductQuantity:function(t){var n=this.cart.find((function(n){return n.id===t.id}));return n?n.quantity:0}},computed:{totalPrice:function(){return this.toFixed(this.cart.reduce((function(t,n){return t+n.price*n.quantity}),0))}}};n.default=c}).call(this,e("df3c")["default"])},"9b83":function(t,n,e){"use strict";(function(t,n){var r=e("47a9");e("13b0");r(e("3240"));var i=r(e("376b"));t.__webpack_require_UNI_MP_PLUGIN__=e,n(i.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},b021:function(t,n,e){"use strict";e.d(n,"b",(function(){return r})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){}));var r=function(){var t=this,n=t.$createElement,e=(t._self._c,t.__map(t.products,(function(n,e){var r=t.__get_orig(n),i=t.getProductQuantity(n);return{$orig:r,m0:i}}))),r=t.isCartVisible?t.__map(t.cart,(function(n,e){var r=t.__get_orig(n),i=t.toFixed(n.price*n.quantity);return{$orig:r,m1:i}})):null;t.$mp.data=Object.assign({},{$root:{l0:e,l1:r}})},i=[]},d785:function(t,n,e){"use strict";e.r(n);var r=e("39e4"),i=e.n(r);for(var o in r)["default"].indexOf(o)<0&&function(t){e.d(n,t,(function(){return r[t]}))}(o);n["default"]=i.a},ee32:function(t,n,e){},f841:function(t,n,e){"use strict";var r=e("ee32"),i=e.n(r);i.a}},[["9b83","common/runtime","common/vendor"]]]);