(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mall/index"],{1362:function(t,e,o){"use strict";o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){}));var n=function(){var t=this.$createElement,e=(this._self._c,this.loadEnd?this.hotGoods&&this.hotGoods.length:null),o=this.loadEnd?this.goodsList.length:null;this.$mp.data=Object.assign({},{$root:{g0:e,g1:o}})},i=[]},"1acd":function(t,e,o){"use strict";(function(t,e){var n=o("47a9");o("13b0");n(o("3240"));var i=n(o("9a36"));t.__webpack_require_UNI_MP_PLUGIN__=o,e(i.default)}).call(this,o("3223")["default"],o("df3c")["createPage"])},3324:function(t,e,o){"use strict";var n=o("e4fd"),i=o.n(n);i.a},"52a1":function(t,e,o){"use strict";o.r(e);var n=o("8aa9"),i=o.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},"8aa9":function(t,e,o){"use strict";(function(t){var n=o("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(o("af34")),s=n(o("7ca3")),a=o("8f59");function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}var c={components:{carousel:function(){o.e("pages/component/mall/carousel").then(function(){return resolve(o("43b3"))}.bind(null,o)).catch(o.oe)},hotGoods:function(){o.e("pages/component/goods/hot").then(function(){return resolve(o("7dc1"))}.bind(null,o)).catch(o.oe)},goodsList:function(){o.e("pages/component/goods/list").then(function(){return resolve(o("36cc"))}.bind(null,o)).catch(o.oe)}},data:function(){return{loadEnd:!1,carouselList:[],screenList:[],goodsList:[],recPage:1,recLimit:10,recHasMore:!1,hotGoods:[],hotPage:1,hotHasMore:!1,hotLimit:10}},computed:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){(0,s.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},(0,a.mapState)({themeColor:function(t){return t.app.themeColor},shareImage:function(t){return t.app.shareImage},shareTitle:function(t){return t.app.shareTitle}})),onLoad:function(){var e=this;t.showLoading({title:"加载中"}),this.getCarousel(),this.getCategoay(),this.getRecGoodsList((function(){t.hideLoading(),e.loadEnd=!0})),this.getHotGoodsList()},onPullDownRefresh:function(){this.recPage=1,this.goodsList.length&&this.$refs.goodsList.clearList(),this.hotPage=1,this.getCarousel(),this.getCategoay(),this.getRecGoodsList((function(){t.stopPullDownRefresh()})),this.getHotGoodsList()},onReachBottom:function(){this.recHasMore&&(this.recPage++,this.getRecGoodsList())},onShareAppMessage:function(){return{title:this.shareTitle,imageUrl:this.shareImage}},onShareTimeline:function(){return{title:this.shareTitle,imageUrl:this.shareImage}},methods:{getHotGoodsList:function(){var e=this;this.$util.request("mall.goodsList",{is_hot:1,page:this.hotPage,limit:this.hotLimit}).then((function(o){if(1==o.code){var n=o.data.data;e.hotHasMore=e.hotPage<o.data.total/e.hotLimit,e.hotGoods=1==e.hotPage?n:[].concat((0,i.default)(e.hotGoods),(0,i.default)(n))}else t.showToast({title:o.msg,icon:"none"})})).catch((function(t){console.error("获取热销商品",t)}))},getRecGoodsList:function(e){var o=this;this.$util.request("mall.goodsList",{page:this.recPage,limit:this.recLimit}).then((function(n){if(e&&e(),1==n.code){var s=n.data.data;o.recHasMore=o.recPage<n.data.total/o.recLimit,o.goodsList=1==o.recPage?s:[].concat((0,i.default)(o.goodsList),(0,i.default)(s)),o.$nextTick((function(){o.goodsList.length&&o.$refs.goodsList.getList(o.goodsList)}))}else t.showToast({title:n.msg,icon:"none"})})).catch((function(t){console.error("获取商品列表",t)}))},getCategoay:function(){var e=this;this.$util.request("mall.categoay").then((function(o){1==o.code?e.screenList=o.data:t.showToast({title:o.msg,icon:"none"})})).catch((function(t){console.error("获取商品分类",t)}))},getCarousel:function(){var e=this;this.$util.request("mall.carousel").then((function(o){1==o.code?e.carouselList=o.data:t.showToast({title:o.msg,icon:"none"})})).catch((function(t){console.error("获取轮播图",t)}))},toDetails:function(t){this.$util.toPage({mode:1,path:"/pagesMall/goods/list?id="+t.id+"&name="+t.name})},hotNextPage:function(){this.hotHasMore&&(this.hotPage++,this.getHotGoodsList())}}};e.default=c}).call(this,o("df3c")["default"])},"9a36":function(t,e,o){"use strict";o.r(e);var n=o("1362"),i=o("52a1");for(var s in i)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(s);o("3324");var a=o("828b"),r=Object(a["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=r.exports},e4fd:function(t,e,o){}},[["1acd","common/runtime","common/vendor"]]]);