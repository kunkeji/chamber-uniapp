<view class="page-container data-v-4627cdf5"><title-bar vue-id="1049c302-1" title="{{navigationBarTitle}}" class="data-v-4627cdf5" bind:__l="__l"></title-bar><view class="shop-header data-v-4627cdf5"><view class="shop-info data-v-4627cdf5"><view data-event-opts="{{[['tap',[['toggleDropdown',['$event']]]]]}}" class="dropdown data-v-4627cdf5" bindtap="__e"><image class="shop-logo data-v-4627cdf5" src="{{selectedShop.shop_image}}" mode="aspectFill"></image><text class="shop-name data-v-4627cdf5">{{selectedShop.title}}</text><text class="{{['dropdown-icon','data-v-4627cdf5',(showDropdown)?'active':'']}}">▼</text></view><view class="business-status data-v-4627cdf5"><text class="{{['data-v-4627cdf5',(isBusinessOpen)?'open':'']}}">{{isBusinessOpen?'营业中':'休息中'}}</text><switch checked="{{isBusinessOpen}}" color="#07c160" data-event-opts="{{[['change',[['toggleBusinessStatus',['$event']]]]]}}" bindchange="__e" class="data-v-4627cdf5"></switch></view></view><block wx:if="{{showDropdown}}"><view class="dropdown-menu data-v-4627cdf5"><block wx:for="{{shops}}" wx:for-item="shop" wx:for-index="__i0__" wx:key="id"><view data-event-opts="{{[['tap',[['selectShop',['$0'],[[['shops','id',shop.id]]]]]]]}}" class="dropdown-item data-v-4627cdf5" bindtap="__e"><image class="shop-logo data-v-4627cdf5" src="{{shop.shop_image}}" mode="aspectFill"></image><text class="shop-name data-v-4627cdf5">{{shop.title}}</text></view></block></view></block></view><view class="revenue-cards data-v-4627cdf5"><view class="revenue-card data-v-4627cdf5"><text class="revenue-value data-v-4627cdf5">{{"¥"+selectedShop.total_day}}</text><text class="revenue-label data-v-4627cdf5">今日营业额</text></view><view class="revenue-card data-v-4627cdf5"><text class="revenue-value data-v-4627cdf5">{{"¥"+selectedShop.total_month}}</text><text class="revenue-label data-v-4627cdf5">本月营业额</text></view><view class="revenue-card data-v-4627cdf5"><text class="revenue-value data-v-4627cdf5">{{"¥"+selectedShop.total_all}}</text><text class="revenue-label data-v-4627cdf5">总营业额</text></view></view><view class="quick-actions data-v-4627cdf5"><view data-event-opts="{{[['tap',[['navigateTo',['menu1']]]]]}}" class="action-btn data-v-4627cdf5" bindtap="__e"><text class="action-icon data-v-4627cdf5">🍽️</text><text class="data-v-4627cdf5">菜品管理</text></view><view data-event-opts="{{[['tap',[['navigateTo',['menu2']]]]]}}" class="action-btn data-v-4627cdf5" bindtap="__e"><text class="action-icon data-v-4627cdf5">⚙️</text><text class="data-v-4627cdf5">店铺设置</text></view><view data-event-opts="{{[['tap',[['navigateTo',['menu3']]]]]}}" class="action-btn data-v-4627cdf5" bindtap="__e"><text class="action-icon data-v-4627cdf5">📋</text><text class="data-v-4627cdf5">订单核销</text></view></view><view class="order-status-tabs data-v-4627cdf5"><block wx:for="{{$root.l0}}" wx:for-item="status" wx:for-index="__i1__" wx:key="$orig"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" data-event-params="{{({status:status.$orig})}}" class="{{['status-tab','data-v-4627cdf5',(currentStatus===status.$orig)?'active':'']}}" bindtap="__e">{{''+status.m0+''}}</view></block></view><scroll-view class="order-list data-v-4627cdf5" scroll-y="{{true}}"><block wx:if="{{hasOrders}}"><block wx:for="{{$root.l1}}" wx:for-item="order" wx:for-index="__i2__" wx:key="id"><view class="order-card data-v-4627cdf5"><view class="order-header data-v-4627cdf5"><text class="order-number data-v-4627cdf5">{{"订单号："+order.$orig.order_number}}</text><text class="order-type data-v-4627cdf5">{{order.m1}}</text></view><view class="order-info data-v-4627cdf5"><block wx:if="{{order.$orig.order_type!='3'}}"><view class="time-info data-v-4627cdf5"><text class="info-label data-v-4627cdf5">预计用餐时间：</text><text class="info-value data-v-4627cdf5">{{order.$orig.expected_time}}</text></view></block><block wx:if="{{order.$orig.order_type=='3'}}"><view class="address-info data-v-4627cdf5"><text class="info-label data-v-4627cdf5">配送地址：</text><text class="info-value data-v-4627cdf5">{{order.$orig.address}}</text></view></block><view class="goods-list data-v-4627cdf5"><block wx:for="{{order.$orig.order_details}}" wx:for-item="detail" wx:for-index="__i3__" wx:key="id"><view class="goods-item data-v-4627cdf5"><text class="goods-name data-v-4627cdf5">{{detail.name}}</text><text class="goods-quantity data-v-4627cdf5">{{"x"+detail.quantity}}</text><text class="goods-price data-v-4627cdf5">{{"¥"+detail.price}}</text></view></block></view><view class="order-total data-v-4627cdf5"><text class="data-v-4627cdf5">实付金额：</text><text class="total-amount data-v-4627cdf5">{{"¥"+order.$orig.total_amount}}</text></view></view><view class="order-actions data-v-4627cdf5"><block wx:if="{{order.$orig.status==='1'}}"><button class="action-button data-v-4627cdf5" disabled="{{order.$orig.isProcessing}}" data-event-opts="{{[['tap',[['handleOrderAction',['$0','2'],[[['filteredOrders','id',order.$orig.id,'order_number']]]]]]]}}" bindtap="__e">{{''+(order.$orig.isProcessing?'处理中...':'立即接单')+''}}</button></block><block wx:if="{{order.$orig.status==='2'&&order.$orig.order_type!='3'}}"><button class="action-button data-v-4627cdf5" disabled="{{order.$orig.isProcessing}}" data-event-opts="{{[['tap',[['handleOrderAction',['$0','3'],[[['filteredOrders','id',order.$orig.id,'order_number']]]]]]]}}" bindtap="__e">{{''+(order.$orig.isProcessing?'处理中...':'准备就绪')+''}}</button></block><block wx:if="{{order.$orig.status==='2'&&order.$orig.order_type=='3'}}"><button class="action-button data-v-4627cdf5" disabled="{{order.$orig.isProcessing}}" data-event-opts="{{[['tap',[['handleOrderAction',['$0','4'],[[['filteredOrders','id',order.$orig.id,'order_number']]]]]]]}}" bindtap="__e">{{''+(order.$orig.isProcessing?'处理中...':'开始配送')+''}}</button></block></view></view></block></block><block wx:else><view class="empty-state data-v-4627cdf5"><text class="empty-text data-v-4627cdf5">暂无订单</text></view></block></scroll-view></view>