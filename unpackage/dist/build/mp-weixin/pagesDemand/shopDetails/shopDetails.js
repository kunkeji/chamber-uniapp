(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesDemand/shopDetails/shopDetails"],{"2e01":function(t,e,o){"use strict";(function(t){var n=o("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(o("7ca3"));function s(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function a(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?s(Object(o),!0).forEach((function(e){(0,i.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var r={data:function(){return{navigationBarTitle:"店铺管理",shop:{id:null,title:"",shop_image:"",delivery:0,slogan:"",status:0,produce:0},shopId:null,selectImages:[]}},computed:{shopImage:function(){return this.shop.shop_image?getApp().globalData.adminPath+this.shop.shop_image:""}},methods:{getShopInfo:function(){var e=this;this.$util.request("main.Shop.getShopByShopId",{shop_id:this.shopId}).then((function(o){1===o.code?e.shop=a(a({},o.data),{},{delivery:parseInt(o.data.delivery),status:parseInt(o.data.status)}):t.showToast({title:"获取店铺信息失败",icon:"none",duration:2e3})})).catch((function(e){console.error("请求失败",e),t.showToast({title:"请求失败",icon:"none",duration:2e3})}))},chooseImage:function(){var e=this;t.chooseImage({count:1,success:function(o){e.selectImages=o.tempFilePaths,e.shop.shop_image=o.tempFilePaths[0],e.$util.uploadFile(o.tempFilePaths[0]).then((function(t){e.shop.shop_image=t.data["url"]})).catch((function(e){console.error("上传图片失败",e),t.showToast({title:"上传图片失败",icon:"none",duration:2e3})}))}})},toggleDelivery:function(t){this.shop.delivery=t.detail.value?1:0},toggleStatus:function(t){this.shop.status=t.detail.value?1:0},updateShop:function(){this.sendUpdateRequest()},sendUpdateRequest:function(){var e={id:this.shop.id,title:this.shop.title,shop_image:this.shop.shop_image,delivery:this.shop.delivery.toString(),slogan:this.shop.slogan,status:this.shop.status.toString(),produce:this.shop.produce};this.$util.request("main.Shop.updateShopById",e).then((function(e){1===e.code?(t.showToast({title:"更新成功",icon:"success",duration:2e3}),t.navigateBack()):t.showToast({title:"更新失败",icon:"none",duration:2e3})})).catch((function(e){console.error("请求失败",e),t.showToast({title:"请求失败",icon:"none",duration:2e3})}))}},onLoad:function(t){this.shopId=t.id,this.getShopInfo()}};e.default=r}).call(this,o("df3c")["default"])},"33c0":function(t,e,o){"use strict";o.r(e);var n=o("2e01"),i=o.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},"33de":function(t,e,o){},4740:function(t,e,o){"use strict";o.r(e);var n=o("5cf9"),i=o("33c0");for(var s in i)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(s);o("7b27");var a=o("828b"),r=Object(a["a"])(i["default"],n["b"],n["c"],!1,null,"c85bb552",null,!1,n["a"],void 0);e["default"]=r.exports},"5cf9":function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return s})),o.d(e,"a",(function(){return n}));var n={uniIcons:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(o.bind(null,"05e0"))}},i=function(){var t=this.$createElement;this._self._c},s=[]},"7b27":function(t,e,o){"use strict";var n=o("33de"),i=o.n(n);i.a},a60d:function(t,e,o){"use strict";(function(t,e){var n=o("47a9");o("13b0");n(o("3240"));var i=n(o("4740"));t.__webpack_require_UNI_MP_PLUGIN__=o,e(i.default)}).call(this,o("3223")["default"],o("df3c")["createPage"])}},[["a60d","common/runtime","common/vendor"]]]);